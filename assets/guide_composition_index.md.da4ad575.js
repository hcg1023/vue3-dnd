import{_ as n,c as a,o as s,M as t}from"./app.e05e657c.js";const m='{"title":"Composition API","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u57FA\u672C\u793A\u4F8B","slug":"\u57FA\u672C\u793A\u4F8B"}],"relativePath":"guide/composition/index.md"}',p={},o=t(`<h1 id="composition-api" tabindex="-1">Composition API <a class="header-anchor" href="#composition-api" aria-hidden="true">#</a></h1><p>\u6211\u4EEC\u63D0\u4F9B\u4E86\u4E09\u4E2A\u4E3B\u8981\u7684\u94A9\u5B50\u6765\u5C06\u4F60\u7684\u7EC4\u4EF6\u8FDE\u63A5\u5230Vue3 DnD\u3002\u5E76\u4E14\u63D0\u4F9B\u4E86\u7B2C\u56DB\u4E2A\u94A9\u5B50\u6765\u8BA9\u4F60\u5728\u5F00\u53D1\u6216\u6D4B\u8BD5\u4E2D\u8FDE\u63A5\u5230Vue3 DnD\u3002</p><ul><li><code>useDrag</code></li><li><code>useDrop</code></li><li><code>useDragLayer</code></li><li><code>useDragDropManager</code>\uFF08\u5F00\u53D1/\u6D4B\u8BD5\u6302\u94A9\uFF09</li></ul><h2 id="\u57FA\u672C\u793A\u4F8B" tabindex="-1">\u57FA\u672C\u793A\u4F8B <a class="header-anchor" href="#\u57FA\u672C\u793A\u4F8B" aria-hidden="true">#</a></h2><p>\u4F7F\u7528composition api\u5236\u4F5C\u4E00\u4E2A\u7B80\u5355\u7684\u53EF\u4EE5\u62D6\u653E\u7684\u76D2\u5B50\u3002</p><div class="language-vue"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> useDrag <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue3-dnd&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@vueuse/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>collect<span class="token punctuation">,</span> drag<span class="token punctuation">,</span> dragPreview<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrag</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u201Ctype\u201D\u662F\u5FC5\u9700\u7684\u3002\u5B83\u7531\u653E\u7F6E\u76EE\u6807\u7684\u201Caccept\u201D\u4F7F\u7528\u3002</span>
	<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;BOX&#39;</span><span class="token punctuation">,</span>
	<span class="token comment">// collect \u51FD\u6570\u4F20\u5165\u4E00\u4E2A\u201C\u76D1\u89C6\u5668\u201D\u5B9E\u4F8B\uFF0C\u7528\u4E8E\u4ECE DnD \u4E2D\u83B7\u53D6\u9700\u8981\u7684\u72B6\u6001\u4FE1\u606F\u3002</span>
	<span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">monitor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">isDragging</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isDragging</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// collect\u662F\u4E00\u4E2ARef\u5BF9\u8C61\uFF0C\u9ED8\u8BA4\u53D6\u503C\u9700\u8981\u4ECEcollect.value\u4E2D\u83B7\u53D6,</span>
<span class="token comment">// \u53EF\u4EE5\u4F7F\u7528toRefs\u5C06Ref\u5BF9\u8C61\u8F6C\u6362\u4E3A\u53EF\u89E3\u6784\u7684\u5BF9\u8C61</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> isDragging <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- \u8FD9\u662F\u53EF\u9009\u7684\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CdragPreview \u5C06\u9644\u52A0\u5230 dragSource --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dragPreview<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ opacity: isDragging ? 0.5 : 1 }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Handle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u9700\u8981\u4E00\u4E2A\u653E\u7F6E\u76EE\u6807\u3002</p><div class="language-vue"><pre><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>useDrop<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue3-dnd&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>toRefs<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vueuse/core&#39;</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>collect<span class="token punctuation">,</span> drop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useDrop</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// \u5141\u8BB8\u653E\u7F6E\u7684type(string|symbol)\uFF0C\u6216\u8005types</span>
	<span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">&#39;BOX&#39;</span><span class="token punctuation">,</span>
	<span class="token comment">// \u4F20\u9012\u4E2Acollect\u7684\u6570\u636E</span>
	<span class="token function-variable function">collect</span><span class="token operator">:</span> <span class="token parameter">monitor</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">isOver</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">isOver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token literal-property property">canDrop</span><span class="token operator">:</span> monitor<span class="token punctuation">.</span><span class="token function">canDrop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>canDrop<span class="token punctuation">,</span> isOver<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>collect<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ backgroundColor: isOver ? <span class="token punctuation">&#39;</span>red<span class="token punctuation">&#39;</span> : <span class="token punctuation">&#39;</span>white<span class="token punctuation">&#39;</span> }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		{{ canDrop ? &#39;Release to drop&#39; : &#39;Drag a box here&#39; }}
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>\u8FD9\u6837\u6211\u4EEC\u5C31\u5B9E\u73B0\u4E86\u4E00\u4E2A\u62D6\u62FD\u7684\u76D2\u5B50\uFF0C\u4F60\u53EF\u4EE5\u63A5\u7740\u9605\u8BFB\u5355\u72EC\u7684API\u6587\u6863\uFF0C\u6216\u8005\u67E5\u770B<a href="/vue3-dnd/example/">\u793A\u4F8B</a>\u3002</p>`,9),e=[o];function c(l,u,k,i,r,g){return s(),a("div",null,e)}var v=n(p,[["render",c]]);export{m as __pageData,v as default};
