import{d as h,f as B,k as D,o as s,c as p,j as O,t as g,z as A,e as m,n as S,u as L,x as y,l as R,w as P,b as _,F as f,q as k,U as F,L as $,s as I}from"../app.2848e89b.js";import{t as b}from"./index.b2c5a59d.js";const w={key:0},x=h({__name:"Dustbin",props:{lastDroppedItem:{},accepts:{},onDrop:{type:Function}},setup(u){const c={height:"12rem",width:"12rem",marginRight:"1.5rem",marginBottom:"1.5rem",color:"white",padding:"1rem",textAlign:"center",fontSize:"1rem",lineHeight:"normal",float:"left"},n=u,[l,i]=B(()=>({accept:n.accepts,collect:o=>({isOver:o.isOver(),canDrop:o.canDrop()}),drop:o=>n.onDrop(o)})),{canDrop:d,isOver:a}=b(l),t=D(()=>m(d)&&m(a)),e=D(()=>t.value?"darkgreen":d.value?"darkkhaki":"#222");return(o,v)=>(s(),p("div",{ref:m(i),style:S({...c,backgroundColor:e.value})},[O(g(t.value?"Release to drop":`This dustbin accepts: ${o.accepts.join(",")}`)+" ",1),o.lastDroppedItem?(s(),p("p",w," Last dropped: "+g(JSON.stringify(o.lastDroppedItem)),1)):A("",!0)],4))}}),C={key:0},E={key:1},N=h({__name:"Box",props:{name:{},type:{},isDropped:{type:Boolean}},setup(u){const c={border:"1px dashed gray",backgroundColor:"white",padding:"0.5rem 1rem",marginRight:"1.5rem",marginBottom:"1.5rem",cursor:"move",float:"left"},n=u,[l,i]=L(()=>({type:n.type,item:{name:n.name},isDragging(t){const e=t.getItem();return n.name===e.name},collect:t=>({isDragging:t.isDragging()})})),{isDragging:d}=b(l),a=D(()=>m(d)?.4:1);return(t,e)=>(s(),p("div",{ref:m(i),style:S({...c,opacity:a.value})},[t.isDropped?(s(),p("s",C,g(t.name),1)):(s(),p("span",E,g(t.name),1))],4))}}),r={FOOD:"food",GLASS:"glass",PAPER:"paper"},z={style:{overflow:"hidden",clear:"both"}},G={style:{overflow:"hidden",clear:"both"}},U=h({__name:"Container",setup(u){const c=y([{id:1,accepts:[r.GLASS],lastDroppedItem:null},{id:2,accepts:[r.FOOD],lastDroppedItem:null},{id:3,accepts:[r.PAPER,r.GLASS,F],lastDroppedItem:null},{id:4,accepts:[r.PAPER,$],lastDroppedItem:null}]),n=y([{name:"Bottle",type:r.GLASS},{name:"Banana",type:r.FOOD},{name:"Magazine",type:r.PAPER}]),l=y([]);R(()=>{const a=setInterval(()=>{n.value.sort(()=>Math.random()-.5),c.value.sort(()=>Math.random()-.5)},4e3);P(()=>{clearInterval(a)})});const i=a=>l.value.indexOf(a)>-1,d=(a,t)=>{const{name:e}=t;c.value[a].lastDroppedItem=t,e&&l.value.push(e)};return(a,t)=>(s(),p("div",null,[_("div",z,[(s(!0),p(f,null,k(c.value,(e,o)=>(s(),I(x,{key:`${e.id}`,accepts:e.accepts,"last-dropped-item":e.lastDroppedItem,"on-drop":v=>d(o,v)},null,8,["accepts","last-dropped-item","on-drop"]))),128))]),_("div",G,[(s(!0),p(f,null,k(n.value,(e,o)=>(s(),I(N,{key:o,name:e.name,type:e.type,"is-dropped":i(e.name)},null,8,["name","type","is-dropped"]))),128))])]))}});export{U as _};
