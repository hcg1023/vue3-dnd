import{d as g,k as I,o as p,c as u,t as $,n as D,_ as y,u as S,l as b,m as O,a as m,e as i,p as L,f as M,F as P,q as X,s as T,v as A,w as W,x,y as E,b as c,z as F}from"../app.14328452.js";import{t as w}from"./index.20b6c65a.js";const B={BOX:"box"};const N=["role"],V=g({__name:"Box",props:{title:{},yellow:{type:Boolean},preview:{type:Boolean}},setup(n){const t=n,e=I(()=>t.yellow?"yellow":"white");return(o,_)=>(p(),u("div",{class:"box",style:D({backgroundColor:e.value}),role:o.preview?"BoxPreview":"Box"},$(o.title),13,N))}});var C=y(V,[["__scopeId","data-v-66657dc4"]]);const z=g({__name:"DraggableBox",props:{id:{},title:{},left:{},top:{}},setup(n){const t=n,[e,o,_]=S(()=>({type:B.BOX,item:t,collect:r=>({isDragging:r.isDragging()})}));b(()=>{_(O(),{captureDraggingState:!0})});const{isDragging:s}=w(e);return(r,l)=>(p(),u("div",{ref:i(o),style:D({position:"absolute",transform:`translate3d(${r.left}px, ${r.top}px, 0)`,opacity:i(s)?0:1,height:i(s)?0:""}),role:"DraggableBox"},[m(C,{title:r.title},null,8,["title"])],4))}});function k(n,t){const e=Math.round(n/32)*32,o=Math.round(t/32)*32;return[e,o]}const j=g({__name:"Container",props:{snapToGrid:{type:Boolean}},setup(n){const t=n,e=L({a:{top:20,left:80,title:"Drag me around"},b:{top:180,left:20,title:"Drag me too"}}),o=(s,r,l)=>{Object.assign(e[s],{left:r,top:l})},[,_]=M(()=>({accept:B.BOX,drop(s,r){const l=r.getDifferenceFromInitialOffset();let d=Math.round(s.left+l.x),a=Math.round(s.top+l.y);t.snapToGrid&&([d,a]=k(d,a)),o(s.id,d,a)}}));return(s,r)=>(p(),u("div",{ref:i(_),class:"container"},[(p(!0),u(P,null,X(e,(l,d)=>(p(),T(z,A({id:d,key:d,ref_for:!0},l),null,16,["id"]))),128))],512))}});var q=y(j,[["__scopeId","data-v-6e7dfca1"]]);const R={class:"box-drag-preview"},U=g({__name:"BoxDragPreview",props:{title:{}},setup(n){b(()=>{const e=setInterval(()=>t.value=!t.value,500);W(()=>{clearInterval(e)})});const t=x(!1);return(e,o)=>(p(),u("div",R,[m(C,{title:e.title,yellow:t.value,preview:""},null,8,["title","yellow"])]))}});var Y=y(U,[["__scopeId","data-v-3563bfe4"]]);const H={class:"layer"},J=g({__name:"CustomDragLayer",props:{snapToGrid:{type:Boolean}},setup(n){function t(a,h,G){if(!a||!h)return{display:"none"};let{x:v,y:f}=h;return G&&(v-=a.x,f-=a.y,[v,f]=k(v,f),v+=a.x,f+=a.y),{transform:`translate(${v}px, ${f}px)`}}const e=n,o=E(a=>({item:a.getItem(),itemType:a.getItemType(),initialOffset:a.getInitialSourceClientOffset(),currentOffset:a.getSourceClientOffset(),isDragging:a.isDragging()})),{itemType:_,isDragging:s,item:r,initialOffset:l,currentOffset:d}=w(o);return(a,h)=>(p(),u("div",H,[c("div",{style:D(t(i(l),i(d),e.snapToGrid))},[i(_)===i(B).BOX?(p(),T(Y,{key:0,title:i(r).title},null,8,["title"])):F("",!0)],4)]))}});var K=y(J,[["__scopeId","data-v-27dc481a"]]);const Q={for:"snapToGridWhileDragging"},Z=["checked"],ee=c("small",null,"Snap to grid while dragging",-1),te=c("br",null,null,-1),ae={for:"snapToGridAfterDrop"},oe=["checked"],re=c("small",null,"Snap to grid after drop",-1),ie=g({__name:"Example",setup(n){const t=x(!1),e=x(!1),o=()=>{t.value=!t.value},_=()=>{e.value=!e.value};return(s,r)=>(p(),u("div",null,[m(q,{"snap-to-grid":t.value},null,8,["snap-to-grid"]),m(K,{"snap-to-grid":e.value},null,8,["snap-to-grid"]),c("p",null,[c("label",Q,[c("input",{id:"snapToGridWhileDragging",type:"checkbox",checked:e.value,onChange:_},null,40,Z),ee]),te,c("label",ae,[c("input",{id:"snapToGridAfterDrop",type:"checkbox",checked:t.value,onChange:o},null,40,oe),re])])]))}});export{ie as _};
