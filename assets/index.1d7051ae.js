import{_ as h}from"./index.71a9837b.js";import{u as S}from"./useDrop.4abc680f.js";import{u as O}from"./useDrag.915eb989.js";import{q as T,u as l,w as B,d as _,h as u,a as g,t as M,s as D,N as X,C,e as m,D as A,F as E,r as L,J as w,O as N,o as P,n as x,b as p,K as W}from"./vendor.5fb5b3db.js";import{t as k}from"./main.0fbd7173.js";import{u as F,e as R}from"./connectDragRef.5341d72d.js";function V(t){const o=F(),e=T(()=>l(o).getMonitor()),[n,s]=R(e,t);return B(r=>{r(e.value.subscribeToOffsetChange(s))}),B(r=>{r(e.value.subscribeToStateChange(s))}),n}const b={BOX:"box"};const j=["role"],q=_({props:{title:null,yellow:{type:Boolean},preview:{type:Boolean}},setup(t){const o=t,e=T(()=>o.yellow?"yellow":"white");return(n,s)=>(u(),g("div",{class:"box",style:D({backgroundColor:l(e)}),role:t.preview?"BoxPreview":"Box"},M(t.title),13,j))}});var G=h(q,[["__scopeId","data-v-8b76f7f8"]]);const z=_({props:{id:null,title:null,left:null,top:null},setup(t){const o=t,[e,n,s]=O(()=>({type:b.BOX,item:o,collect:c=>({isDragging:c.isDragging()})}));s.value(X(),{captureDraggingState:!0});const{isDragging:r}=C(k(e));return(c,i)=>(u(),g("div",{ref:l(n),style:D({position:"absolute",transform:`translate3d(${t.left}px, ${t.top}px, 0)`,opacity:l(r)?0:1,height:l(r)?0:""}),role:"DraggableBox"},[m(G,{title:t.title},null,8,["title"])],4))}});function I(t,o){const e=Math.round(t/32)*32,n=Math.round(o/32)*32;return[e,n]}const J=_({props:{snapToGrid:{type:Boolean}},setup(t){const o=t,e=A({a:{top:20,left:80,title:"Drag me around"},b:{top:180,left:20,title:"Drag me too"}}),n=(r,c,i)=>{Object.assign(e[r],{left:c,top:i})},[,s]=S(()=>({accept:b.BOX,drop(r,c){const i=c.getDifferenceFromInitialOffset();let d=Math.round(r.left+i.x),a=Math.round(r.top+i.y);o.snapToGrid&&([d,a]=I(d,a)),n(r.id,d,a)}}));return(r,c)=>(u(),g("div",{ref:l(s),class:"container"},[(u(!0),g(E,null,L(l(e),(i,d)=>(u(),w(z,N({id:d,key:d},i),null,16,["id"]))),128))],512))}});var K=h(J,[["__scopeId","data-v-4cc189b1"]]);const U={class:"box-drag-preview"},Y=_({props:{title:null},setup(t){const o=setInterval(()=>e.value=!e.value,500);P(()=>{clearInterval(o)});const e=x(!1);return(n,s)=>(u(),g("div",U,[m(G,{title:t.title,yellow:e.value,preview:""},null,8,["title","yellow"])]))}});var H=h(Y,[["__scopeId","data-v-2224c5f2"]]);const Q={class:"layer"},Z=_({props:{snapToGrid:{type:Boolean}},setup(t){const o=t;function e(a,y,$){if(!a||!y)return{display:"none"};let{x:f,y:v}=y;return $&&(f-=a.x,v-=a.y,[f,v]=I(f,v),f+=a.x,v+=a.y),{transform:`translate(${f}px, ${v}px)`}}const n=V(a=>({item:a.getItem(),itemType:a.getItemType(),initialOffset:a.getInitialSourceClientOffset(),currentOffset:a.getSourceClientOffset(),isDragging:a.isDragging()})),{itemType:s,isDragging:r,item:c,initialOffset:i,currentOffset:d}=C(k(n));return(a,y)=>(u(),g("div",Q,[p("div",{style:D(e(l(i),l(d),o.snapToGrid))},[l(s)===l(b).BOX?(u(),w(H,{key:0,title:l(c).title},null,8,["title"])):W("",!0)],4)]))}});var ee=h(Z,[["__scopeId","data-v-511ad5ca"]]);const te={for:"snapToGridWhileDragging"},oe=["checked"],ae=p("small",null,"Snap to grid while dragging",-1),re=p("br",null,null,-1),ne={for:"snapToGridAfterDrop"},se=["checked"],le=p("small",null,"Snap to grid after drop",-1),ce=_({setup(t){const o=x(!1),e=x(!1),n=()=>{o.value=!o.value},s=()=>{e.value=!e.value};return(r,c)=>(u(),g("div",null,[m(K,{"snap-to-grid":o.value},null,8,["snap-to-grid"]),m(ee,{"snap-to-grid":e.value},null,8,["snap-to-grid"]),p("p",null,[p("label",te,[p("input",{id:"snapToGridWhileDragging",type:"checkbox",checked:e.value,onChange:s},null,40,oe),ae]),re,p("label",ne,[p("input",{id:"snapToGridAfterDrop",type:"checkbox",checked:o.value,onChange:n},null,40,se),le])])]))}});var ve=ce;export{ve as default};
